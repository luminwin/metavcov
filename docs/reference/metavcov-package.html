<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Computing Variances and Covariances, Visualization and Missing Data Solution for Multivariate Meta Analysis — metavcov-package • Computing Variances and Covariances, Visualization and Missing Data Solution for Multivariate Meta-Analysis with metavcov</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Computing Variances and Covariances, Visualization and Missing Data Solution for Multivariate Meta Analysis — metavcov-package" />
<meta property="og:description" content="The package metavcov computes variances and covariances for effect sizes as preparations for multivariate meta-analysis. Effect sizes include correlation (r), mean difference (MD), standardized mean difference (SMD), log odds ratio (logOR), log risk ratio (logRR), and risk difference (RD). Functions for plotting confidence intervals and multiple imputation for missing data are offered. It can fit a fixed-effect model for demonstration purposes; users are highly encouraged to use packages mvmeta and metaSEM for random-effect models." />
<meta property="og:image" content="https://github.com/luminwin/metavcov/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YFJ4LZ36ZN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YFJ4LZ36ZN');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Computing Variances and Covariances, Visualization and Missing Data Solution for Multivariate Meta-Analysis with metavcov</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/intro.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
    Introduction
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/metavcov-package.html">Overview</a>
    </li>
    <li>
      <a href="../reference/r.vcov.html">Correlation Coefficients with r.vcov</a>
    </li>
    <li>
      <a href="../reference/mix.vcov.html">All Other Effect Sizes with mix.vcov</a>
    </li>
    <li>
      <a href="../reference/plotCI.html">Data Visualization with plotCI</a>
    </li>
    <li>
      <a href="../reference/metami.html">Multiple Imputation for Missing Data with metami</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/luminwin/metavcov/issues">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/luminwin/metavcov/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computing Variances and Covariances, Visualization and Missing Data Solution for Multivariate Meta Analysis</h1>
    
    <div class="hidden name"><code>metavcov-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The package <code>metavcov</code> computes variances and covariances for effect sizes as preparations for multivariate meta-analysis. Effect sizes include correlation (r), mean difference (MD), standardized mean difference (SMD), log odds ratio (logOR), log risk ratio (logRR), and risk difference (RD). Functions for plotting confidence intervals and multiple imputation for missing data are offered. It can fit a fixed-effect model for demonstration purposes; users are highly encouraged to use packages <code>mvmeta</code> and <code>metaSEM</code> for random-effect models.</p>
    </div>



    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Min Lu (Maintainer,&lt;m.lu6@umiami.edu&gt;)</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ahn, S., Lu, M., Lefevor, G.T., Fedewa, A. &amp; Celimli, S. (2016). Application of meta-analysis in sport and exercise science. In N. Ntoumanis, &amp; N. Myers (Eds.), <em>An Introduction to Intermediate and Advanced Statistical Analyses for Sport and Exercise Scientists</em> (pp.233-253). Hoboken, NJ: John Wiley and Sons, Ltd.</p>
<p>Olkin, I., &amp; Ishii, G. (1976). Asymptotic distribution of functions of a correlation matrix. In S. Ikeda (Ed.), <em>Essays in probability and statistics: A volume in honor of Professor Junjiro Ogawa</em> (pp.5-51). Tokyo, Japan: Shinko Tsusho.</p>
<p>B. J. Becker. (2009) Model-based meta-analysis. In H. Cooper, L. V. Hedges, and J. C. Valentine, (Ed.), <em>The handbook of research synthesis and meta-analysis</em>, chapter 20, pages 377-395. Russell Sage Foundation,</p>
<p>Wei, Y., &amp;  Higgins, J. (2013). Estimating within study covariances in multivariate meta-analysis with multiple outcomes. <em>Statistics in Medicine, 32</em>(7), 119-1205.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>###############################################</span>
<span class='co'># Effect size: correlation coefficients</span>
<span class='co'>###############################################</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>Craft2003</span><span class='op'>)</span>
<span class='co'># extract correlation from the dataset (craft)</span>
<span class='va'>corflat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Craft2003</span>, select<span class='op'>=</span><span class='va'>C1</span><span class='op'>:</span><span class='va'>C6</span><span class='op'>)</span>
<span class='co'># transform correlations to z and compute variance-covariance matrix.</span>
<span class='va'>computvcov</span> <span class='op'>&lt;-</span> <span class='fu'><a href='r.vcov.html'>r.vcov</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>N</span>, corflat <span class='op'>=</span> <span class='va'>corflat</span>, method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span>
<span class='co'># name transformed z scores as y</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>ef</span>
<span class='co'># name variance-covariance matrix of trnasformed z scores as S</span>
<span class='va'>S</span> <span class='op'>&lt;-</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>matrix.vcov</span>
<span class='va'>S</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt;        var_C1     cov_C1_C2     cov_C1_C3     cov_C1_C4     cov_C1_C5 
#&gt;  0.0476190476 -0.0001899941  0.0013681072 -0.0101984824 -0.0128884805 
#&gt;     cov_C1_C6        var_C2     cov_C2_C3     cov_C2_C4     cov_C2_C5 
#&gt; -0.0004515741  0.0476190476  0.0037735402  0.0210426002  0.0019652885 
#&gt;     cov_C2_C6        var_C3     cov_C3_C4     cov_C3_C5     cov_C3_C6 
#&gt; -0.0126765964  0.0476190476  0.0016356653  0.0210998103 -0.0100708563 
#&gt;        var_C4     cov_C4_C5     cov_C4_C6        var_C5     cov_C5_C6 
#&gt;  0.0476190476  0.0054443862 -0.0017789233  0.0476190476 -0.0028349359 
#&gt;        var_C6 
#&gt;  0.0476190476 </div><div class='input'><span class='co'>## fixed-effect model</span>
<span class='va'>MMA_FE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='metafixed.html'>metafixed</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>y</span>, Slist <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.vcov</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>MMA_FE</span>
</div><div class='output co'>#&gt; Fixed-effects coefficients
#&gt;     Estimate  Std. Error         z  Pr(&gt;|z|)  95%ci.lb  95%ci.ub     
#&gt; C1    0.6156      0.0314   19.6266    0.0000    0.5541    0.6770  ***
#&gt; C2   -0.2679      0.0314   -8.5448    0.0000   -0.3294   -0.2065  ***
#&gt; C3   -0.3403      0.0314  -10.8531    0.0000   -0.4017   -0.2788  ***
#&gt; C4   -0.0768      0.0314   -2.4493    0.0143   -0.1383   -0.0153    *
#&gt; C5   -0.0472      0.0314   -1.5062    0.1320   -0.1087    0.0142     
#&gt; C6    0.1496      0.0314    4.7693    0.0000    0.0881    0.2111  ***
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
#&gt; 
#&gt; Multivariate Cochran Q-test for heterogeneity:
#&gt; Q = 321.7900 (df = 102), p-value = 0.0000
#&gt; I-square statistic = 68.3%
#&gt; </div><div class='input'><span class='co'># Restricted maximum likelihood (REML) estimator from the mvmeta package</span>
<span class='co'>#library(mvmeta)</span>
<span class='co'>#mvmeta_RE &lt;- summary(mvmeta(cbind(C1, C2, C3, C4, C5, C6),</span>
<span class='co'>#                           S = S, data = y, method = "reml"))</span>
<span class='co'>#mvmeta_RE</span>

<span class='co'># maximum likelihood estimators from the metaSEM package</span>
<span class='co'># library(metaSEM)</span>
<span class='co'># metaSEM_RE &lt;- summary(meta(y = y, v = S))</span>
<span class='co'># metaSEM_RE</span>
<span class='co'># Plotting the result:</span>
<span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='va'>MMA_FE</span>
<span class='co'># obj &lt;- mvmeta_RE</span>
<span class='co'># obj &lt;- metaSEM_RE</span>
<span class='co'># pdf("CI.pdf", width = 4, height = 7)</span>
<span class='fu'><a href='plotCI.html'>plotCI</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>ef</span>, v <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.vcov</span>,
        name.y <span class='op'>=</span> <span class='cn'>NULL</span>, name.study <span class='op'>=</span> <span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>ID</span>,
        y.all <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span>,
        y.all.se <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $`Plotting C1`</div><div class='img'><img src='metavcov-package-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C2`</div><div class='img'><img src='metavcov-package-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C3`</div><div class='img'><img src='metavcov-package-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C4`</div><div class='img'><img src='metavcov-package-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C5`</div><div class='img'><img src='metavcov-package-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C6`</div><div class='img'><img src='metavcov-package-6.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'><span class='co'># dev.off()</span>
<span class='co'>#########################################################################</span>
<span class='co'># Other effect sizes of the same or different type</span>
<span class='co'># Choose variable SBP, DBP, DD, D with effect sizes "MD","MD","RD","lgOR"</span>
<span class='co'>#########################################################################</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span><span class='op'>)</span>
<span class='co'>## set the correlation coefficients list r</span>
<span class='va'>r12</span> <span class='op'>&lt;-</span> <span class='fl'>0.71</span>
<span class='va'>r13</span> <span class='op'>&lt;-</span> <span class='fl'>0.5</span>
<span class='va'>r14</span> <span class='op'>&lt;-</span> <span class='fl'>0.25</span>
<span class='va'>r23</span> <span class='op'>&lt;-</span> <span class='fl'>0.6</span>
<span class='va'>r24</span> <span class='op'>&lt;-</span> <span class='fl'>0.16</span>
<span class='va'>r34</span> <span class='op'>&lt;-</span> <span class='fl'>0.16</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mix.vcov.html'>vecTosm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>r12</span>, <span class='va'>r13</span>, <span class='va'>r14</span>, <span class='va'>r23</span>, <span class='va'>r24</span>, <span class='va'>r34</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
<span class='va'>mix.r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span><span class='op'>)</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>i</span><span class='op'>)</span><span class='op'>{</span><span class='va'>r</span><span class='op'>}</span><span class='op'>)</span>
<span class='co'>## compute variance co-variances</span>
<span class='va'>computvcov</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mix.vcov.html'>mix.vcov</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MD"</span>, <span class='st'>"MD"</span>, <span class='st'>"RD"</span>, <span class='st'>"lgOR"</span><span class='op'>)</span>,
                       d <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>MD_SBP</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>MD_DBP</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>,
                       sdt <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sdt_SBP</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sdt_DBP</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>,
                       sdc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sdc_SBP</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sdc_DBP</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>,
                       nt <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span>, select <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>nt_SBP</span>, <span class='va'>nt_DBP</span>, <span class='va'>nt_DD</span>, <span class='va'>nt_D</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
                       nc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Geeganage2010</span>, select <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>nc_SBP</span>, <span class='va'>nc_DBP</span>, <span class='va'>nc_DD</span>, <span class='va'>nc_D</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
                       st <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>st_DD</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>st_D</span><span class='op'>)</span>,
                       sc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sc_DD</span>, <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>sc_D</span><span class='op'>)</span>,
                       r <span class='op'>=</span> <span class='va'>mix.r</span>,
                       name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MD.SBP"</span>, <span class='st'>"MD.DBP"</span>, <span class='st'>"RD.DD"</span>, <span class='st'>"lgOR.D"</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># save different effect sizes in y</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>ef</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   MD.SBP MD.DBP       RD.DD     lgOR.D
#&gt; 1  -2.47  -3.44  0.00000000 -1.0986123
#&gt; 2   1.61  -0.34  0.18750000  0.5959834
#&gt; 3  -8.16  -6.44  0.02554455  0.5892102
#&gt; 4  -3.17  -3.41  0.04000000  0.4444945
#&gt; 5  -0.15  -2.39  0.01920750  0.1000835
#&gt; 6  -9.83   1.93 -0.25000000 -0.5108256</div><div class='input'><span class='co'># save variances and covariances of all the effect sizes in a matrix S</span>
<span class='va'>S</span> <span class='op'>&lt;-</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>matrix.vcov</span>
<span class='va'>S</span><span class='op'>[</span><span class='fl'>1</span>, <span class='op'>]</span>
</div><div class='output co'>#&gt;   var_MD.SBP cov_MD.SBP_MD.DBP cov_MD.SBP_RD.DD cov_MD.SBP_lgOR.D var_MD.DBP
#&gt; 1   87.98831          34.81409        0.9245278          2.278204   27.85141
#&gt;   cov_MD.DBP_RD.DD cov_MD.DBP_lgOR.D var_RD.DD cov_RD.DD_lgOR.D var_lgOR.D
#&gt; 1           0.6207         0.7907191  0.040625       0.02741618   1.020833</div><div class='input'><span class='co'>## fixed-effect model</span>
<span class='va'>MMA_FE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='metafixed.html'>metafixed</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>y</span>, Slist <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.vcov</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Restricted maximum likelihood (REML) estimator from the mvmeta package</span>
 <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.ag-myresearch.com/package-mvmeta'>mvmeta</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>This is mvmeta 1.0.3. For an overview type: help('mvmeta-package').</span></div><div class='input'> <span class='va'>mvmeta_RE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/mvmeta/man/mvmeta.html'>mvmeta</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>MD.SBP</span>, <span class='va'>MD.DBP</span>, <span class='va'>RD.DD</span>, <span class='va'>lgOR.D</span><span class='op'>)</span> <span class='op'>~</span><span class='va'>.</span>,
                            S <span class='op'>=</span> <span class='va'>S</span>, data <span class='op'>=</span> <span class='va'>y</span>, method <span class='op'>=</span> <span class='st'>"reml"</span><span class='op'>)</span><span class='op'>)</span>
 <span class='va'>mvmeta_RE</span>
</div><div class='output co'>#&gt; Call:  mvmeta(formula = cbind(MD.SBP, MD.DBP, RD.DD, lgOR.D) ~ ., S = S, 
#&gt;     data = y, method = "reml")
#&gt; 
#&gt; Multivariate random-effects meta-analysis
#&gt; Dimension: 4
#&gt; Estimation method: REML
#&gt; 
#&gt; Fixed-effects coefficients
#&gt;         Estimate  Std. Error        z  Pr(&gt;|z|)  95%ci.lb  95%ci.ub   
#&gt; MD.SBP   -2.2985      1.6172  -1.4212    0.1552   -5.4682    0.8712   
#&gt; MD.DBP   -2.5155      1.1940  -2.1067    0.0351   -4.8558   -0.1752  *
#&gt; RD.DD     0.0135      0.0195   0.6928    0.4885   -0.0247    0.0517   
#&gt; lgOR.D    0.0836      0.1004   0.8327    0.4050   -0.1132    0.2804   
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
#&gt; 
#&gt; Between-study random-effects (co)variance components
#&gt; Structure: General positive-definite
#&gt;         Std. Dev    Corr                
#&gt; MD.SBP    4.6739  MD.SBP  MD.DBP   RD.DD
#&gt; MD.DBP    3.9292  0.9776                
#&gt; RD.DD     0.0218  0.3666  0.1627        
#&gt; lgOR.D    0.0454  0.7369  0.5782  0.8991
#&gt; 
#&gt; Multivariate Cochran Q-test for heterogeneity:
#&gt; Q = 137.4078 (df = 64), p-value = 0.0000
#&gt; I-square statistic = 53.4%
#&gt; 
#&gt; 17 studies, 68 observations, 4 fixed and 10 random-effects parameters
#&gt;   logLik       AIC       BIC  
#&gt; -92.2480  212.4959  242.7203  
#&gt; </div><div class='input'>
<span class='co'># maximum likelihood estimators from the metaSEM package</span>
 <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/mikewlcheung/metasem'>metaSEM</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: OpenMx</span></div><div class='output co'>#&gt; <span class='message'>OpenMx may run faster if it is compiled to take advantage of multiple cores.</span></div><div class='output co'>#&gt; <span class='message'>"SLSQP" is set as the default optimizer in OpenMx.</span></div><div class='output co'>#&gt; <span class='message'>mxOption(NULL, "Gradient algorithm") is set at "central".</span></div><div class='output co'>#&gt; <span class='message'>mxOption(NULL, "Optimality tolerance") is set at "6.3e-14".</span></div><div class='output co'>#&gt; <span class='message'>mxOption(NULL, "Gradient iterations") is set at "2".</span></div><div class='input'> <span class='va'>metaSEM_RE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/metaSEM/man/meta.html'>meta</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>y</span>, v <span class='op'>=</span> <span class='va'>S</span><span class='op'>)</span><span class='op'>)</span>
 <span class='va'>metaSEM_RE</span>
</div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; meta(y = y, v = S)
#&gt; 
#&gt; 95% confidence intervals: z statistic approximation (robust=FALSE)
#&gt; Coefficients:
#&gt;               Estimate   Std.Error      lbound      ubound z value Pr(&gt;|z|)
#&gt; Intercept1 -1.2594e+00  1.1408e+01 -2.3619e+01  2.1100e+01 -0.1104   0.9121
#&gt; Intercept2 -1.6238e+00  1.5133e+01 -3.1283e+01  2.8036e+01 -0.1073   0.9145
#&gt; Intercept3  1.3275e-02  5.8909e+02 -1.1546e+03  1.1546e+03  0.0000   1.0000
#&gt; Intercept4  5.9969e-02  1.2581e+02 -2.4653e+02  2.4665e+02  0.0005   0.9996
#&gt; Tau2_1_1    6.0518e-01  1.0287e+02 -2.0102e+02  2.0223e+02  0.0059   0.9953
#&gt; Tau2_2_1    1.3066e+00  2.5264e+02 -4.9385e+02  4.9647e+02  0.0052   0.9959
#&gt; Tau2_2_2    1.2662e+00  1.5463e+02 -3.0181e+02  3.0434e+02  0.0082   0.9935
#&gt; Tau2_3_1   -6.0376e-03  1.1486e+04 -2.2513e+04  2.2513e+04  0.0000   1.0000
#&gt; Tau2_3_2   -1.9688e-02  1.4137e+04 -2.7709e+04  2.7709e+04  0.0000   1.0000
#&gt; Tau2_3_3    1.5113e-03          NA          NA          NA      NA       NA
#&gt; Tau2_4_1   -4.5208e-02  2.4796e+03 -4.8599e+03  4.8599e+03  0.0000   1.0000
#&gt; Tau2_4_2    6.2169e-03  3.0646e+03 -6.0065e+03  6.0065e+03  0.0000   1.0000
#&gt; Tau2_4_3    1.0743e-02          NA          NA          NA      NA       NA
#&gt; Tau2_4_4    2.2724e-03  1.4893e+04 -2.9189e+04  2.9189e+04  0.0000   1.0000
#&gt; 
#&gt; Q statistic on the homogeneity of effect sizes: 137.4078
#&gt; Degrees of freedom of the Q statistic: 64
#&gt; P value of the Q statistic: 2.790395e-07
#&gt; 
#&gt; Heterogeneity indices (based on the estimated Tau2):
#&gt;                              Estimate
#&gt; Intercept1: I2 (Q statistic)   0.0340
#&gt; Intercept2: I2 (Q statistic)   0.2017
#&gt; Intercept3: I2 (Q statistic)   0.1992
#&gt; Intercept4: I2 (Q statistic)   0.0127
#&gt; 
#&gt; Number of studies (or clusters): 17
#&gt; Number of observed statistics: 68
#&gt; Number of estimated parameters: 14
#&gt; Degrees of freedom: 54
#&gt; -2 log likelihood: 194.1707 
#&gt; OpenMx status1: 5 ("0" or "1": The optimization is considered fine.
#&gt; Other values may indicate problems.)</div><div class='output co'>#&gt; <span class='warning'>Warning: OpenMx status1 is neither 0 or 1. You are advised to 'rerun' it again.</span></div><div class='input'><span class='co'># Plotting the result:</span>
<span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='va'>MMA_FE</span>
<span class='co'># obj &lt;- mvmeta_RE</span>
<span class='co'># obj &lt;- metaSEM_RE</span>
<span class='co'># pdf("CI.pdf", width = 4, height = 7)</span>
<span class='fu'><a href='plotCI.html'>plotCI</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>ef</span>, v <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.vcov</span>,
        name.y <span class='op'>=</span> <span class='cn'>NULL</span>, name.study <span class='op'>=</span> <span class='va'>Geeganage2010</span><span class='op'>$</span><span class='va'>studyID</span>,
        y.all <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span>,
        y.all.se <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span>,
        hline <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $`Plotting MD.SBP`</div><div class='img'><img src='metavcov-package-7.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting MD.DBP`</div><div class='img'><img src='metavcov-package-8.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting RD.DD`</div><div class='img'><img src='metavcov-package-9.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting lgOR.D`</div><div class='img'><img src='metavcov-package-10.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div><div class='input'><span class='co'># dev.off()</span>
<span class='co'>#####################################################################################</span>
<span class='co'># Multiple Imputation for missing data</span>
<span class='co'>#####################################################################################</span>
<span class='co'># prepare a dataset with missing values and input arguments for meta.mi</span>
<span class='va'>Craft2003.mnar</span> <span class='op'>&lt;-</span> <span class='va'>Craft2003</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>4</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>Craft2003.mnar</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>C4</span> <span class='op'>&lt;</span> <span class='fl'>0</span><span class='op'>)</span>, <span class='fl'>6</span><span class='op'>)</span>, <span class='st'>"C4"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>Craft2003.mnar</span>
<span class='va'>n.name</span> <span class='op'>&lt;-</span> <span class='st'>"N"</span>
<span class='va'>ef.name</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"C1"</span>, <span class='st'>"C2"</span>, <span class='st'>"C3"</span>, <span class='st'>"C4"</span>, <span class='st'>"C5"</span>, <span class='st'>"C6"</span><span class='op'>)</span>
<span class='co'># fixed-effect model</span>
<span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='metami.html'>metami</a></span><span class='op'>(</span><span class='va'>dat</span>, M <span class='op'>=</span> <span class='fl'>10</span>, vcov <span class='op'>=</span> <span class='st'>"r.vcov"</span>,
             <span class='va'>n.name</span>, <span class='va'>ef.name</span>,
             func <span class='op'>=</span> <span class='st'>"metafixed"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; pooled results from 10 imputations for missing values in C4 
#&gt; Fixed-effects coefficients
#&gt;     Estimate  Std. Error         z  Pr(&gt;|z|)  95%ci.lb  95%ci.ub     
#&gt; C1    0.5164      0.0314   16.4660    0.0000    0.4550    0.5779  ***
#&gt; C2   -0.2553      0.0314   -8.1420    0.0000   -0.3168   -0.1938  ***
#&gt; C3   -0.3181      0.0314  -10.1443    0.0000   -0.3796   -0.2566  ***
#&gt; C4   -0.0339      0.0314   -1.0811    0.2797   -0.0954    0.0276     
#&gt; C5   -0.0471      0.0314   -1.5012    0.1333   -0.1085    0.0144     
#&gt; C6    0.1383      0.0314    4.4094    0.0000    0.0768    0.1998  ***
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
#&gt; </div><div class='input'><span class='co'># Plotting the result</span>
<span class='va'>computvcov</span> <span class='op'>&lt;-</span> <span class='fu'><a href='r.vcov.html'>r.vcov</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>N</span>,
                     corflat <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Craft2003.mnar</span>, select <span class='op'>=</span> <span class='va'>C1</span><span class='op'>:</span><span class='va'>C6</span><span class='op'>)</span>,
                     method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span>
<span class='fu'><a href='plotCI.html'>plotCI</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>ef</span>, v <span class='op'>=</span> <span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.vcov</span>,
        name.y <span class='op'>=</span> <span class='cn'>NULL</span>, name.study <span class='op'>=</span> <span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>ID</span>,
        y.all <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>1</span><span class='op'>]</span>,
        y.all.se <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>coefficients</span><span class='op'>[</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $`Plotting C1`</div><div class='img'><img src='metavcov-package-11.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C2`</div><div class='img'><img src='metavcov-package-12.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C3`</div><div class='img'><img src='metavcov-package-13.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C4`</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 6 rows containing missing values (geom_pointrange).</span></div><div class='img'><img src='metavcov-package-14.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C5`</div><div class='img'><img src='metavcov-package-15.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $`Plotting C6`</div><div class='img'><img src='metavcov-package-16.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://luminwin.github.io/Lu/articles/cv.html'>Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


