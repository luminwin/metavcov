<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Covariance matrix for correlation coefficients — r.vcov • Variance-Covariance Matrix for Multivariate Meta-Analysis with metavcov</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Covariance matrix for correlation coefficients — r.vcov" />
<meta property="og:description" content="Compute variance-covariance matrix for multivariate meta-analysis when effect size is correlation coefficient." />
<meta property="og:image" content="https://github.com/luminwin/metavcov/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WZWXVK817Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZWXVK817Z');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Variance-Covariance Matrix for Multivariate Meta-Analysis with metavcov</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/intro.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html#introduction-1">Introduction</a>
    </li>
    <li>
      <a href="../articles/intro.html#quick-start-1">Correlation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/luminwin/metavcov/issues">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/luminwin/metavcov/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Covariance matrix for correlation coefficients</h1>
    
    <div class="hidden name"><code>r.vcov.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute variance-covariance matrix for multivariate meta-analysis when effect size is correlation coefficient.</p>
    </div>

    <pre class="usage"><span class='fu'>r.vcov</span><span class='op'>(</span><span class='va'>n</span>, <span class='va'>corflat</span>, method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n </th>
      <td><p>Sample sizes from studies.</p></td>
    </tr>
    <tr>
      <th>corflat </th>
      <td><p>Correlation coefficients from studies.</p></td>
    </tr>
    <tr>
      <th>method </th>
      <td><p>Method "average" computes variance covariances with sample-size weighted mean correlation coefficients from all studies; method "each" computes variance covariances with each of the corresponding correlation coefficients.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Min Lu</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>How to arrange correlation coefficients of each study from matrix to vector is in Cooper et al book page 385 to 386. Details for average method are in book of Cooper et al page 388.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    

<dt>list.rcov </dt><dd><p>A list of computed Variance-covariance matrices.</p></dd>
<dt>rcov </dt><dd><p>A matrix whose rows are computed Variance-covariance vectors.</p></dd>
<dt>zr </dt><dd><p>Z transformed correlation coefficients from input "corflat".</p></dd>
<dt>list.rcov </dt><dd><p>A list of computed Variance-covariance matrices from z transformed correlation coefficients.</p></dd>
<dt>zcov </dt><dd><p>A matrix whose rows are computed Variance-covariance vectors from z transformed correlation coefficients.</p></dd>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ahn, S., Lu, M., Lefevor, G.T., Fedewa, A. &amp; Celimli, S. (2016). Application of meta-analysis in sport and exercise science. In N. Ntoumanis, &amp; N. Myers (Eds.), <em>An Introduction to Intermediate and Advanced Statistical Analyses for Sport and Exercise Scientists</em> (pp.233-253). Hoboken, NJ: John Wiley and Sons, Ltd.</p>
<p>Cooper, H., Hedges, L.V., &amp; Valentine, J.C. (Eds.) (2009). <em>The handbook of research synthesis and 
meta-analysis.</em> New York: Russell Sage Foundation.</p>
<p>Olkin, I., &amp; Ishii, G. (1976). Asymptotic distribution of functions of a correlation matrix. In S. Ikeda (Ed.), 
<em>Essays in probability and statistics: A volume in honor of Professor Junjiro Ogawa</em> (pp.5-51). Tokyo, 
Japan: Shinko Tsusho.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples">  <span class='co'>######################################################</span>
  <span class='co'># Example: Craft2003 data</span>
  <span class='co'># Preparing covariances for multivariate meta-analysis</span>
  <span class='co'>######################################################</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>Craft2003</span><span class='op'>)</span>
  <span class='co'>#extract correlation from the dataset (craft)</span>
  <span class='va'>corflat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>Craft2003</span>, select<span class='op'>=</span><span class='va'>C1</span><span class='op'>:</span><span class='va'>C6</span><span class='op'>)</span>
  <span class='co'># transform correlations to z and compute variance-covariance matrix.</span>
  <span class='va'>computvocv</span> <span class='op'>&lt;-</span> <span class='fu'>r.vcov</span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>Craft2003</span><span class='op'>$</span><span class='va'>N</span>, corflat <span class='op'>=</span> <span class='va'>corflat</span>, method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span>
  <span class='co'># name transformed z scores as an input</span>
  <span class='va'>Input</span> <span class='op'>&lt;-</span> <span class='va'>computvocv</span><span class='op'>$</span><span class='va'>zr</span>
  <span class='co'># name variance-covariance matrix of trnasformed z scores as covars</span>
  <span class='va'>covars</span> <span class='op'>&lt;-</span> <span class='va'>computvocv</span><span class='op'>$</span><span class='va'>zcov</span>
  <span class='co'>#####################################################</span>
  <span class='co'># Running random-effects model using package "mvmeta"</span>
  <span class='co'>#####################################################</span>
  <span class='co'>#library(mvmeta)</span>
  <span class='co'>#mvmeta_RE &lt;- summary(mvmeta(cbind(C1, C2, C3, C4, C5, C6),</span>
  <span class='co'>#                           S = covars, data = Input, method = "reml"))</span>
  <span class='co'>#mvmeta_RE</span>
  <span class='co'>##############################################################</span>
  <span class='co'># Another example:</span>
  <span class='co'># Checking the example in Harris Cooper et al.'s book page 388</span>
  <span class='co'>##############################################################</span>
<span class='va'>r1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.074</span>, <span class='op'>-</span><span class='fl'>0.127</span>, <span class='fl'>0.324</span>, <span class='fl'>0.523</span>, <span class='op'>-</span><span class='fl'>0.416</span>, <span class='op'>-</span><span class='fl'>0.414</span><span class='op'>)</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>r1</span>, <span class='va'>r1</span><span class='op'>)</span> <span class='co'>### the r.vcov is to handle at least two studies</span>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>142</span>, <span class='fl'>142</span><span class='op'>)</span>
<span class='va'>computvcov</span> <span class='op'>&lt;-</span> <span class='fu'>r.vcov</span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>n</span>, corflat <span class='op'>=</span> <span class='va'>r</span>, method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.rcov</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, <span class='fl'>4</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>computvcov</span><span class='op'>$</span><span class='va'>list.zcov</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, <span class='fl'>4</span><span class='op'>)</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://luminwin.github.io/Lu/articles/cv.html'>Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


